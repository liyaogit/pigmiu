# 负载均衡

## 分类
### DNS负载均衡
> DNS(Domain Name Server): 域名服务器

![DNS负载均衡](https://ww3.sinaimg.cn/large/006tNc79gy1fc7x8apfnyj30pk0ma765.jpg)

* 优点

    1. 简单、成本低。交给DNS服务器处理
    2. 就近访问，提升速度。根据请求IP解析最近的服务器地址
    
* 缺点

    1. 更新不及时。DNS缓存时间比较长
    2. 扩展性差。控制权在域名商那里
    3. 分配策略简单。算法少，无法感知服务器状态

### 硬件负载均衡
#### 可以理解为用于做负载均衡的基础网络设备，例：F5,A10
* 优点

    1. 功能强大。支持全面负载均衡算法，各层级负载均衡
    2. 性能强大。可达到100w并发
    3. 稳定性高。
    4. 支持安全防护。具备防火墙，防DDos功能
    
* 缺点

    1. 价格贵
    2. 扩展能力差

### 软件负载均衡
#### 常用Nginx，5w每秒
* 优点:简单，便宜，灵活
    
* 缺点:相比较硬件负载优点
---
## 负载均衡典型架构
#### 预估高峰并发访问量进行选择
* DNS实现地理级别负载均衡
* F5实现集群级别负载均衡
* Nginx实现机器级别负载均衡
---
## 负载均衡算法
* 轮询
* 加权轮询
    > 采用静态配置
* 负载最低优先
    > 将任务分配给当前负载最低的服务器。可以感知服务器的状态

    > Nginx以”http请求数“来判断服务器状态。(内置不支持,需扩展)

    > 可以按照CPU负载和I/O负载。需要收集服务器的负载，缺点是复杂性高

* 性能最优类
    > 优先将任务分配给处理最快的服务器

* Hash类

  1. 源地址Hash
     > 同一源IP分配给同一台服务器

  2. ID Hash
     > 例如:session ID